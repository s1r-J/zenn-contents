---
title: "TypeScriptã®å‹å®šç¾©ã§æ­£è¦è¡¨ç¾ã£ã½ã„ã‹ã‚“ã˜ã§stringå‹ã‚’è©³ã—ãå®šç¾©ã™ã‚‹"
emoji: "ğŸ”¤"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["typescript", "å‹"]
published: true
---

TypeScriptã§å¤‰æ•°ã®å‹ã¨ã—ã¦stringå‹ã‚’ä½¿ã£ã¦ã„ã‚‹ã¨ãã€ã‚‚ã£ã¨ç´°ã‹ãå®šç¾©ã“ã¨ã‚’çŸ¥ã£ãŸã®ã§ç´¹ä»‹ã—ã¦ãŠãã¾ã™ã€‚

ç°¡å˜ã«ä¾‹ã‚’ç¤ºã™ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã“ã¨ãŒã§ãã¾ã™ã€‚

```typescript
type MarkerTime =`${number| ''}${number}:${number}${number}`;

let a: MarkerTime = "0-00";  // ã“ã®ä»£å…¥ã¯ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹
let b: MarkerTime = "0:00";  // ã“ã®ä»£å…¥ã¯OK
let c: MarkerTime = "09:00"; // ã“ã®ä»£å…¥ã¯OK
```

[TypeScript: TS Playground](https://www.typescriptlang.org/play?ssl=2&ssc=61&pln=2&pc=1#code/FAFwngDgpgBAsgQwE4GspICoEsC2sC8ABgCQDeAdgK44BG6APjAORMC+ZVt6rAXB9XSTsKA7oWDAANlBAwEPeMjSZcBGACIADAFpNm9TAD0hmOiQB7JFJkwaCxKnTY8MfBs089B4zHMprsgDG9kpOqq7uAJye+kYmfsBAA)ã§ã“ã®ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã¨ã€ã‚¨ãƒ©ãƒ¼ç®‡æ‰€ãŒã™ãã«ã‚ã‹ã‚Šã¾ã™ã€‚

ä¸Šã®ä¾‹ã§ã¯ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒªãƒ†ãƒ©ãƒ«ã‚’ä½¿ã£ã¦`MarkerTime`ã¨ã„ã†å‹ã‚’ä½œæˆã—ã¦ã„ã¾ã™ã€‚
ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒªãƒ†ãƒ©ãƒ«ã®ä¸­ã§ã¯ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ï¼ˆ`${}`ï¼‰ã§numberå‹ã¨ç©ºæ–‡å­—åˆ—ã‚’ä½¿ã„ã€
æ™‚åˆ»ã‚’ç¤ºã™æ–‡å­—åˆ—ï¼ˆ`9:00`ã¨ã‹`18:00`ï¼‰ã ã‘ã‚’è¨±å¯ã™ã‚‹å‹ã‚’ä½œæˆã§ãã¾ã—ãŸã€‚

## ã¡ã‚‡ã£ã¨å¿œç”¨ã—ãŸä½¿ã„æ–¹

ä¸Šã®ä¾‹ã‚’ä½¿ã£ã¦ã¡ã‚‡ã£ã¨å¿œç”¨ã—ã¾ã™ã€‚
ã¡ã‚‡ã£ã¨é¢å€’ãªã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹å‹å®šç¾©ï¼ˆä¸‹ä¾‹ã ã¨`DateMappingError`ï¼‰ã‚’å›é¿ã—ã€
ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã›ãšã€å°‘ã—ç´°ã‹ãå‹å®šç¾©ãŒã§ãã¦ã„ã‚‹å‹ã‚’ä½¿ã£ã¦ã„ã¾ã™ï¼ˆä¸‹ä¾‹ã ã¨`DateMappingGood`ï¼‰ã€‚

```typescript
type Year = `${number}${number}${number}${number}`;
type Month = `${number | ''}${number}`;
type Day = `${number | ''}${number}`;

interface DateMappingError { // ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹
	[key: string]: {  // 2é‡ã«ãƒã‚¹ãƒˆã—ãŸå‹å®šç¾©
		[key: string]: {
			[key: string]: string
		}
	}
	otherInfo: {
        // ã“ã®otherInfoãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ 
        // ã‚¨ãƒ©ãƒ¼å†…å®¹: Property 'otherInfo' of type '{ [key: string]: string; }' is not assignable to 'string' index type '{ [key: string]: { [key: string]: string; }; }'.(2411)
        // ã€ŒotherInfoã€ã¯æ–‡å­—åˆ—ãªã®ã§ä¸Šã§å®šç¾©ã—ãŸ2é‡ã«ãƒã‚¹ãƒˆã—ãŸå‹å®šç¾©ã«å¯¾ã—ã¦åˆ¤å®šãŒãŠã“ãªã‚ã‚Œã¦ã—ã¾ã†ãŒã€
        // ã“ã®otherInfoã¯1å›ã—ã‹ãƒã‚¹ãƒˆã—ã¦ãŠã‚‰ãšã€å‹ä¸ä¸€è‡´ã¨åˆ¤æ–­ã•ã‚Œã‚‹
		[key: string]: string
	}
}

interface DateMappingGood {
	[key: Year]: {
		[key: Month]: {
			[key: Day]: number
		}
	},
	otherInfo: {
		[key: string]: string
	}
}

const map1: DateMappingGood = {
    '2022': {
        '1': {
            '1': 123,
            '2': 225,
        },
        '10': {
            '20': 31,
        }
    },
    otherInfo: {
        key1: 'value1',
        key2: 'value2',
    }
};
```

## å‚è€ƒ

- [How to define a regex-matched string type in Typescript? - Stack Overflow](https://stackoverflow.com/questions/51445767/how-to-define-a-regex-matched-string-type-in-typescript)



